<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <h:outputStylesheet name="css/default.css" />
        <h:outputStylesheet name="css/show.css" />
        <title>Ring - final check on data</title>
    </h:head>
    <h:body>
        <p:layout fullPage="true">
            <p:layoutUnit position="north" size="0" header ="Ring of Scholarship" resizable="false" closable="false" collapsible="false">  
            </p:layoutUnit> 
            <p:layoutUnit position="center"> 

                <h:form id ="formId">
                    <h:dataTable id ="dataId" value ="#{finalCheckBean.listCheckedLabels}" var ="m" style ="margin-left: auto; margin-right: auto">

                        <h:column>
                            <h:panelGroup id="editCol">
                                <f:facet name="header">
                                    <h:outputText value="Edit" style="font-weight: bold"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{m.editable}">
                                    <f:ajax execute="editCol :formId:dataId:authorCol" render="editCol :formId:dataId:authorCol" />
                                </h:selectBooleanCheckbox>
                            </h:panelGroup>

                        </h:column>

                        <h:column>
                            <h:panelGroup id="authorCol">
                                <f:facet name="header">
                                    <h:outputText value="Label" style="font-weight: bold"/>
                                </f:facet>
                                <h:inputText value="#{m.author2Edited}" rendered="#{m.editable}" size="10"/>
                                <h:outputText value="#{m.author2displayed}" rendered="#{not m.editable}"/>
                                <h:commandButton value="save edits" rendered="#{m.editable}" action ="#{finalCheckBean.saveedits()}">
                                    <f:ajax execute="authorCol" render="authorCol :formId:dataId:editCol" />
                                </h:commandButton>
                            </h:panelGroup>
                        </h:column>

                        <h:column>
                            <h:panelGroup id="deleteCol">
                                <f:facet name="header">
                                    <h:outputText value="delete row(s)" style="font-weight: bold"/>
                                </f:facet>
                                <h:selectBooleanCheckbox value="#{m.deleted}">
                                    <f:ajax execute ="@form" render="@form"/>
                                </h:selectBooleanCheckbox>
                                <h:commandButton value="delete row(s)?" rendered="#{m.deleted}" action ="#{finalCheckBean.deleteRow()}">
                                    <f:ajax execute="@form" render="@form" />
                                </h:commandButton>
                            </h:panelGroup>
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:commandButton value="save changes" action="#{finalCheckBean.moveon}"/>
                            </f:facet>

                        </h:column>

                    </h:dataTable>
                </h:form>
            </p:layoutUnit>
        </p:layout> 
    </h:body>
</html>

